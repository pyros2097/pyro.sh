localhost:3001 {
	encode zstd gzip
	file_server
	root * ./pyros.sh
	try_files {path} {path}.html

	handle_errors {
		@404 {
			expression {http.error.status_code} == 404
		}
		rewrite @404 /index.html
		file_server
	}
}

localhost:3002 {
	encode zstd gzip
	file_server
	root * ./timer.pyros.sh
}

localhost:3003 {
	encode zstd gzip
	file_server
	root * ./bible.pyros.sh

	header {
		Strict-Transport-Security max-age=31536000;
		X-Content-Type-Options nosniff
		X-Frame-Options DENY
		Referrer-Policy no-referrer-when-downgrade
		Content-Security-Policy: "default-src 'none'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self'; media-src 'self'; style-src 'self'; frame-ancestors 'none'; base-uri 'none';"
	}

	handle_errors {
		@404 {
			expression {http.error.status_code} == 404
		}
		rewrite @404 /index.html
		file_server
	}
}

# setup pihole
# curl -sSL https://install.pi-hole.net | bash
# pihole -a -p
# Enter empty password
# /etc/lighttpd/lighttpd.conf
# server.port = 1080
# sudo systemctl restart lighttpd
# unbound
# http://192.168.0.104:1080/admin/

#TODO:
# increase ulimit and basic ec2 setup
